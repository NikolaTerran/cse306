

Part 2:

THings that maybe need to be changed in the future:
line 10 buf.h, BSIZE -> UBSIZE
line 25 file.h NDIRECT -> 12
